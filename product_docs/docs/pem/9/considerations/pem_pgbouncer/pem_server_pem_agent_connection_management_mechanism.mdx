---
title: "PEM server and agent connection management mechanism"
legacyRedirectsGenerated:
  # This list is generated by a script. If you need add entries, use the `legacyRedirects` key.
  - "/edb-docs/d/edb-postgres-enterprise-manager/installation-getting-started/pgbouncer-configuration-guide/8.0/the_pem_server_pem_agent_connection_management_mechanism.html"
redirects:
  - /pem/latest/pem_pgbouncer/01_the_pem_server_pem_agent_connection_management_mechanism/
  - /pem/latest/pem_online_help/09_toc_pem_configure_pgbouncer/01_pem_pgbouncer_server_agent_connection/
---

In the default configuration, each PEM agent connects to the PEM database server using the SSL certificates for each user. For example, an agent with `ID#1` connects to the PEM database server using the agent1 user.

![Connecting to the PEM database without PgBouncer](../../images/pem_db_without_pgbouncer.png)

In a PgBouncer-enabled environment, each PEM agent connects to PgBouncer using SSL certificates via the `pem_agent_user1` user. Upon authentication, PgBouncer manages connection requests efficiently, for example, by reusing existing connections, limiting the number of active connections.

![Connecting to pgBouncer.](../../images/pem_db_with_pgbouncer.png)

We recommend using PgBouncer version 1.9.0 or later as the connection pooler. Versions 1.9.0 or later support cert authentication.
