---
title: Possible causes and solutions
navTitle: Possible causes and solutions
description: Verify Postgres metric to expose possible causes for low performance of your database clusters
---

If the requirements of your organizations' application or service have grown due to increased traffic, increase the memory, CPUs, storage volume or Disk IOPS by [modifying your cluster's configuration](/biganimal/latest/using_cluster/03_modifying_your_cluster/#modify-your-clusters-configuration-settings).

If your database cluster is experiencing performance issues that you cannot attribute to an increase of data, SQL querying, etc., you can further investigate other metrics that can hint at what is causing the issue.

## Explore connection-related metrics

The number of connections executing SQL queries should not exceed 4 times the number of CPUs in the instance. 

<details><summary>Explore connections with psql</summary> 

1.  Connect to your database using the psql utility. 
1.  Run this query to display the number of active connections: 
    
    ```sql 
    SELECT COUNT(*) FROM pg_stat_activity WHERE state = 'active';
    ```

1.  Display the number of failed connections:

    ```sql 
    SELECT * FROM pg_stat_activity WHERE state = 'failed';
    ```

1.  Display idle connections: 

    ```sql 
    SELECT pid, usename, application_name, client_addr, state, state_change, query 
    FROM pg_stat_activity 
    WHERE state = 'idle'; 
    ```

1.  Run this query to display the number of allowed maximum connections:

    ```sql 
    SHOW max_connections;
    ``` 

</details> 

<br/>

<details><summary>Explore connections in the EDB Postgres AI Console</summary> 

1.  Select a **Project**. 
1.  Select **Clusters**. If there is more than one cluster, select the cluster for which you want to see the metrics. 
1.  Select **Monitoring & Logging** tab.
1.  Use the **Start date** and **End date** to display the average values for a period of time. Start by looking at the first month, then the last three months, the last six months and the last year. 
1.  For each selected period of time, look at the average value for **Connections**. Also consider any aborted connections, as well as connections that remain in idle state for a long period of time. 
1.  Switch to the **Health Status** tab. 
1.  In the expandable region section, see the number of connections per node over the maximum number of connections. 

</details> 
<br/>

### Possible causes

- If you see several connections in aborted or rejected state, your `max_connections` limit could be too low. Analyse whether you need to increase the number of `max_connections` in the `postgresql.conf` file, or use connection pooling for workload concurrency. 

- If you see several connections in aborted or rejected state, the connecton pool size might not be appropriate for your workloads. 

- Your queries could be taking up a lot of resources, because they are overly complex. Consider alternatives to make queries shorter and commit transactions quickly and avoid [locks](https://www.postgresql.org/docs/current/explicit-locking.html).

## Explore query-related metrics 

<details><summary>Explore connections with psql</summary> 

TBD Throughput 

TBD Slow queries and execution time

</details> 
<br/>
<details><summary>Explore connections in the EDB Postgres AI Console</summary> 

TBD Throughput 

TBD Slow queries and execution time
</details> 
<br/>

### Possible causes

TBD

## Explore transaction-related metrics 

<details><summary>Explore connections with psql</summary> 

TBD 

Transactions per second

Commit rates 

Slow commiting transactions

</details> 
<br/>
<details><summary>Explore connections in the EDB Postgres AI Console</summary> 

TBD 

Transactions per second

Commit rates 

Slow commiting transactions

</details> 
<br/>

### Possible causes

TBD

## Explore error logs 

<details><summary>Explore connections with psql</summary> 

TBD 

Database error messages 

Warning and info messages 

</details> 
<br/>
<details><summary>Explore connections in the EDB Postgres AI Console</summary> 

TBD 

Database error messages 

Warning and info messages 

</details> 
<br/>
