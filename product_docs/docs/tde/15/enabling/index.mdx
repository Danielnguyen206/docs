---
title: Creating a TDE-enabled database
description: Understand how to initialize a TDE-encrypted cluster.
deepToC: true
navigation: 
 - enabling_tde
 - enabling_tde_epas
---

If you want to start using Transparent Data Encryption on your database, you either want to create a new TDE-enabled database server, or you want to migrate an existing database server to a TDE-enabled environment. It is not possible to enable TDE on existing instances. 

Regardless of whether you are creating a database server from scratch, or creating a new instance to migrate an existing database server, you have to create a TDE-enabled database by initializing a database cluster using [initdb](https://www.postgresql.org/docs/15/app-initdb.html). 

## Overview

### Before you begin

-   Choose a method to [secure the data encryption key](../secure_key/) generated by TDE.
    
    You can protect they key with a [passphrase](../secure_key/passphrase/), a wrapping key from a [key store](../secure_key/key_store/) or choose [not protect the key](../secure_key/#disabling-key-wrapping) for testing purposes. 

-   Review the [initdb TDE options](../initdb_tde_options/) to ensure you have all information required for the initialization of a TDE-enabled database cluster.

-   Review the [Limitations and TDE-specific options](../limitations/) to understand limitations and changes in the handling of PostgreSQL utilities when you enable TDE.

-   If you plan on migrating data from an existing database server, ensure you perform a backup of the source database server.

### Initializing a server

1.  Export the wrapping and unwrapping commands to secure the encryption key. Use the [wrapping method](../secure_key/) you chose during the planning phase. 

    Alternatively, you can provide the wrapping and unwrapping commands when initializing the server with the command line arguments.

1.  Initialize a database server with `--data-encryption` enabled on the target directory. Include other [TDE options](../initdb_tde_options.mdx) as required.

1.  Start the database cluster and [verify that TDE is enabled](verifying_tde).

See [Tutorials](#tutorials) for detailed initialization examples.

### Migrating data (for existing instances)

If you want to migrate data and objects from an existing database server, use `pg_upgrade` to copy data from an exiting instance:

1.  Stop both the source and new server.

1.  Use `pg_upgrade` with `--copy-by-block` option to copy data from the source server to the new server. Include other [TDE pg_upgrade options](../pg_upgrade_arguments/) as required.

1.  Start the new encrypted database server.

1.  Connect to the encrypted database server and ensure the data was transfered.

1.  Perform any required cleanup operations.

!!!note 
See [TDE pg_upgrade use cases](../upgrade_use_cases/) for an overview of the supported enablement and migration use cases.
!!!

See [Tutorials](#tutorials) for detailed migration examples.

## Tutorials 

* [Creating a TDE-enabled database server](enabling_tde).
* [Enabling TDE on an existing EDB Postgres Advanced Server database cluster](../enabling/enabling_tde_epas/).
* [Upgrading a PostgreSQL database server to EDB Postgres Extended Server while enabling TDE](../upgrade_use_cases/postgres_to_extended/).



