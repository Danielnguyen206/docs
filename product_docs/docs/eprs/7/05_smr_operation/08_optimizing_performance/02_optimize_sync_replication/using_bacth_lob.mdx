---
title: "Using batch synchronization for LOB objects"
---

When synchronizing tables with LOB type columns (BLOB, CLOB, BYTEA etc.), the Replication Server copies the rows by grouping 5 rows in a batch by default. This is to avoid causing out-of-memory errors when an LOB column has more than 100 MB of data. However, replicating data in 5-row batches can make the synchronization process slow.

To improve the performance of synchronization procedures, reduce network roundtrips and speed up data replication, EDB supports copying rows with LOBs in larger batches. This way, the Replication Server can copy several rows at the same time, making the synchronization of shadow tables faster. EDB recommends configuring larger batches only if the average data size per LOB column is smaller than 100 MB.

You can configure the replication of up to 1000 rows per batch. 

!!!note 
   Before increasing the number of rows to synchronize per batch, consider resource availability. Batch procedures increase memory consumption during replication processes. 
!!!

## Enabling batch operations on LOBs

### Prerequisites 

You have upgraded your instances to a Replication Server version that includes this feature. See [Release Notes](../../../eprs_rel_notes) for an overview of the available release versions and the included enhancements. 

### Altering the number of rows per batch

1.  In the publication or primary server, open the `xdb_pubserver.conf` file. 

    See [Installation details](../../../installing/installation_details/#additional-details) to find out where this file is stored according to your operating system. 

1.  In the `xdb_pubserver.conf` file, look for the `syncLOBBatchSize` value.

1.  Adapt the `syncLOBBatchSize` value according to your needs. If not uncommented already, uncomment the line to override the default. In this example, the Replication Server will synchronize 150 rows with LOB data per batch:

    ```
    syncLOBBatchSize=150
    ```

1.  Reload the configuration file as specified in [Reloading the configuration file](../../../08_xdb_cli/03_xdb_cli_commands/52_reload_conf_file). 

Now, each time you take a snapshot and start a replication process, Replication Server will copy 150 rows with LOB objects per network roundtrip. This applies to both manual and scheduled synchronization procedures. 